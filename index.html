<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="bootstrap.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
  </head>

  <title>Ryan Barry</title>
  <link rel="icon" type="image/x-icon" href="Images/FavIcon.png" />

  <body>
    <div class="BarslideIn" id="BarslideInEffect">
      <header>
        <nav
          id="navbar"
          class="navbar navbar-expand-md navbar-dark fixed-top bg-dark"
        >
          <div class="container-fluid">
            <div class="collapse navbar-collapse" id="navbarCollapse">
              <ul class="navbar-nav me-auto mb-2 mb-md-0">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    style="pointer-events: none; cursor: default"
                    aria-current="page"
                    href="#"
                    >Ryan Barry</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link active"
                    href="./Images/2023_Ryan_Barry_Resume.pdf"
                    target="_blank"
                    rel="noopener noreferrer"
                    >Resume</a
                  >
                </li>
              </ul>
              <ul class="navbar-nav ms-auto mb-2 mb-md-0">
                <li class="nav-item nav-link">
                  <input type="checkbox" checked id="darkmode-toggle" />
                  <label for="darkmode-toggle" />
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
    </div>

    <main>
      <div class="setMargintoTen">
        <div class="container marketing">
          <div class="slideFade" id="slideFadeEffect">
            <div class="row">
              <div class="col-lg-4">
                <a
                  href="https://www.linkedin.com/in/ryan-barry-16b640224/"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <img
                    id="icon1" 
                    src="Images/LinkedIn_logo_initials.png"
                    width="144"
                    height="144"
                  />
                </a>
                <h2 style="padding-top: 10px">LinkedIn</h2>
                <p>If you'd like to connect, here's my LinkedIn</p>
              </div>
              <div class="col-lg-4">
                <a
                  href="https://github.com/Rybeardawg1"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <img
                    id="icon2"
                    src="Images/image0 (2).jpg"
                    width="144"
                    height="144"
                  />
                </a>
                <h2 style="padding-top: 10px">GitHub</h2>
                <p>Coursework and personal projects</p>
              </div>
              <div class="col-lg-4">
                <a
                  href="https://leetcode.com/Rybeardawg/"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <img
                    id="icon3"
                    src="Images/RyanLogo.jpg"
                    width="144"
                    height="144"
                  />
                </a>
                <rect width="100%" height="100%" fill="#777" />
                <h2 style="padding-top: 10px">LeetCode</h2>
                <p>I practice data structures and algorithms here</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <p
      id="last-updated-p"
      style="
        position: absolute;
        left: 1%;
        bottom: 0%;
        color: hsla(0, 0%, 86%, 0.555);
      "
    >
      Last Updated: <span id="last-updated">Loading...</span>
    </p>
    <div style="opacity: 70%; position: absolute; right: 1%; bottom: 1%">
      <input class="color-range" type="range" min="0" max="100" value="" />
    </div>
  </body>
</html>

<script>
  console.log("script.js loaded");
  let icon1 = document.getElementById("icon1");
  let icon2 = document.getElementById("icon2");
  let icon3 = document.getElementById("icon3");
  const height = icon1.clientHeight;
  const width = icon1.clientWidth;
  icon1.addEventListener("mousemove", handleIcon1Move);
  icon2.addEventListener("mousemove", handleIcon2Move);
  icon3.addEventListener("mousemove", handleIcon3Move);

  function handleIcon1Move(e) {
    const xVal = e.layerX;
    const yVal = e.layerY;
    const yRotation = 20 * ((xVal - width / 2) / width);
    const xRotation = -20 * ((yVal - height / 2) / height);
    const string =
      "perspective(500px) scale(1.1) rotateX(" +
      xRotation +
      "deg) rotateY(" +
      yRotation +
      "deg)";
      icon1.style.transform = string;
  }
  function handleIcon2Move(e) {
    const xVal = e.layerX;
    const yVal = e.layerY;
    const yRotation = 20 * ((xVal - width / 2) / width);
    const xRotation = -20 * ((yVal - height / 2) / height);
    const string =
      "perspective(500px) scale(1.1) rotateX(" +
      xRotation +
      "deg) rotateY(" +
      yRotation +
      "deg)";
      icon2.style.transform = string;
  }
  function handleIcon3Move(e) {
    const xVal = e.layerX;
    const yVal = e.layerY;
    const yRotation = 20 * ((xVal - width / 2) / width);
    const xRotation = -20 * ((yVal - height / 2) / height);
    const string =
      "perspective(500px) scale(1.1) rotateX(" +
      xRotation +
      "deg) rotateY(" +
      yRotation +
      "deg)";
      icon3.style.transform = string;
  }

  icon1.addEventListener("mouseout", function () {
    icon1.style.transform = "perspective(500px) scale(1) rotateX(0) rotateY(0)";
  });
  icon1.addEventListener("mousedown", function () {
    icon1.style.transform = "perspective(500px) scale(0.9) rotateX(0) rotateY(0)";
  });
  icon1.addEventListener("mouseup", function () {
    icon1.style.transform = "perspective(500px) scale(1.1) rotateX(0) rotateY(0)";
  });
  icon2.addEventListener("mouseout", function () {
    icon2.style.transform = "perspective(500px) scale(1) rotateX(0) rotateY(0)";
  });
  icon2.addEventListener("mousedown", function () {
    icon2.style.transform = "perspective(500px) scale(0.9) rotateX(0) rotateY(0)";
  });
  icon2.addEventListener("mouseup", function () {
    icon2.style.transform = "perspective(500px) scale(1.1) rotateX(0) rotateY(0)";
  });
  icon3.addEventListener("mouseout", function () {
    icon3.style.transform = "perspective(500px) scale(1) rotateX(0) rotateY(0)";
  });
  icon3.addEventListener("mousedown", function () {
    icon3.style.transform = "perspective(500px) scale(0.9) rotateX(0) rotateY(0)";
  });
  icon3.addEventListener("mouseup", function () {
    icon3.style.transform = "perspective(500px) scale(1.1) rotateX(0) rotateY(0)";
  });

  var firstTone = "90%";
  var secondTone = "80%";
  function getCookie(cname) {
    let name = cname + "=";
    let decodedCookie = decodeURIComponent(document.cookie);
    let ca = decodedCookie.split(";");
    for (let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == " ") {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
  }
  function addCookie(cookie) {
    document.cookie = cookie;
  }
  function setHue() {
    var hue = getCookie("hue");
    if (hue == "") {
      hue = "227";
    }
    var bgHsl =
      " linear-gradient(166deg, hsl(" +
      hue +
      ", " +
      firstTone +
      ", " +
      firstTone +
      ") 0%, hsl(" +
      hue +
      ", " +
      secondTone +
      ", " +
      secondTone +
      ") 100%)";
    document.body.style.background = bgHsl;
    document.body.style.backgroundAttachment = "fixed";
    document.body.style.backgroundSize = "800%";
    document.body.style.backgroundRepeat = "no-repeat";
    document.querySelector(".color-range").value = hue / 3.6;
  }
  function lightMode() {
    document.body.style.color = "black";
    document.getElementById("navbar").classList.remove("bg-dark");
    document.getElementById("navbar").classList.add("bg-light");
    document.getElementById("navbar").classList.remove("navbar-dark");
    document.getElementById("navbar").classList.add("navbar-light");
    firstTone = "90%";
    secondTone = "80%";
    document.getElementById("last-updated-p").style.color =
      "hsla(0, 0%, 0%, 1)";
    setHue();
  }
  function darkMode() {
    document.body.style.color = "white";
    document.getElementById("navbar").classList.remove("bg-light");
    document.getElementById("navbar").classList.add("bg-dark");
    document.getElementById("navbar").classList.remove("navbar-light");
    document.getElementById("navbar").classList.add("navbar-dark");
    firstTone = "30%";
    secondTone = "20%";
    document.getElementById("last-updated-p").style.color =
      "hsla(0, 0%, 86%, 0.555)";
    setHue();
  }

  window.onload = function hueThemeSetter() {
    setHue();
    var darkmode = getCookie("darkmode");
    if (darkmode == "false") {
      document.getElementById("darkmode-toggle").checked = false;
      lightMode();
    } else {
      document.getElementById("darkmode-toggle").checked = true;
      darkMode();
    }
  };

  var darkmodeToggle = document.getElementById("darkmode-toggle");
  darkmodeToggle.addEventListener("change", function (e) {
    this.checked ? darkMode() : lightMode();
    addCookie("darkmode=" + this.checked + ";");
    console.log("changed darkmode cookie");
    var darkmode = getCookie("darkmode");
    if (darkmode == "true") {
      document.getElementById("darkmode-toggle").checked = true;
      darkMode();
    } else if (darkmode == "false") {
      document.getElementById("darkmode-toggle").checked = false;
      lightMode();
    }
  });

  var colorRange = document.querySelector(".color-range");
  colorRange.addEventListener("input", function (e) {
    var hue = ((this.value / 100) * 360).toFixed(0);
    var bgHsl =
      " linear-gradient(166deg, hsl(" +
      hue +
      ", " +
      firstTone +
      ", " +
      firstTone +
      ") 0%, hsl(" +
      hue +
      ", " +
      secondTone +
      ", " +
      secondTone +
      ") 100%)";
    document.body.style.background = bgHsl;
    document.body.style.backgroundAttachment = "fixed";
    document.body.style.backgroundSize = "800%";
    document.body.style.backgroundRepeat = "no-repeat";
    addCookie("hue=" + hue + ";");
    console.log("changed hue cookie");
  });

  let date = new Date();

  if (getCookie("visited") == date.toDateString()) {
    document.getElementById("BarslideInEffect").classList.remove("BarslideIn");
    document.getElementById("slideFadeEffect").classList.remove("slideFade");
  } else {
    addCookie("visited=" + date.toDateString() + ";");
    console.log("changed last visited cookie");
  }

  console.log("cookies: " + document.cookie);

  const Http = new XMLHttpRequest();
  const url =
    "https://api.github.com/repos/Rybeardawg1/Rybeardawg1.github.io/commits";
  Http.open("GET", url);
  Http.send();

  Http.onreadystatechange = (e) => {
    response = Http.responseText;
    index = 9 + response.search('"date": ');
    const lastCommitDate = new Date(response.substring(index, index + 10));
    const months = [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
    ];
    const formattedDate = lastCommitDate.toLocaleDateString();
    document.getElementById("last-updated").textContent =
      months[lastCommitDate.getMonth()] +
      " " +
      lastCommitDate.getDate() +
      ", " +
      lastCommitDate.getFullYear();
  };
</script>
